# 감정 분석 시스템 - 감정 체계 정의

> 이 문서는 프론트엔드와 백엔드가 공유하는 감정 분류 체계입니다.  
> 양쪽 모두 이 문서를 기준으로 구현해야 합니다.

---

## 감정 분류 체계 (총 20개)

### 긍정 감정 (10개)

| 감정명 | 영문 키     | 설명                               | 일기 예시                        |
| ------ | ----------- | ---------------------------------- | -------------------------------- |
| 기쁨   | joy         | 즉각적인 좋은 일, 원하는 것을 얻음 | "선물 받아서 기뻐", "복권 당첨!" |
| 행복   | happiness   | 지속적이고 깊은 만족감             | "가족과 함께 있어서 행복해"      |
| 감사   | gratitude   | 고마운 마음                        | "도움 받아서 감사해"             |
| 설렘   | excitement  | 앞으로의 일에 대한 두근거림        | "내일 여행 간다!"                |
| 평온   | peace       | 고요하고 편안함                    | "조용한 카페에서 책 읽기"        |
| 성취감 | achievement | 목표 달성, 뿌듯함                  | "프로젝트 완료했어"              |
| 사랑   | love        | 누군가를 향한 애정                 | "사랑하는 사람들과"              |
| 희망   | hope        | 미래에 대한 긍정적 기대            | "좋은 일 생길 것 같아"           |
| 활력   | vitality    | 에너지 넘침, 의욕 가득             | "운동하고 기분 짱"               |
| 재미   | fun         | 새로운 경험의 즐거움, 흥미로움     | "새 게임 시작했는데 재밌어"      |

### 부정 감정 (10개)

| 감정명 | 영문 키        | 설명                    | 일기 예시                      |
| ------ | -------------- | ----------------------- | ------------------------------ |
| 슬픔   | sadness        | 상실감, 우울            | "이별이 슬퍼"                  |
| 외로움 | loneliness     | 혼자라는 느낌           | "주변에 아무도 없어"           |
| 불안   | anxiety        | 미래에 대한 걱정        | "시험이 불안해"                |
| 분노   | anger          | 화남, 억울함            | "부당한 대우 받아서 화나"      |
| 피곤   | fatigue        | 지쳐서 힘듦             | "너무 피곤해서 쓰러질 것 같아" |
| 후회   | regret         | 과거 행동이 아쉬움      | "그때 왜 그랬을까"             |
| 무기력 | lethargy       | 아무것도 하기 싫음      | "침대에서 나가기 싫어"         |
| 혼란   | confusion      | 머릿속이 복잡함         | "뭘 해야 할지 모르겠어"        |
| 실망   | disappointment | 기대했던 게 안 됨       | "약속이 취소돼서 실망"         |
| 지루함 | boredom        | 할 게 없고 시간이 안 감 | "집에만 있으니 지루해"         |

---

## 감정별 꽃 매칭

| 감정   | 꽃 이름       | 꽃말                 | 이미지 파일명      |
| ------ | ------------- | -------------------- | ------------------ |
| 기쁨   | 해바라기      | 당신을 보면 행복해요 | `sunflower`        |
| 행복   | 코스모스      | 평화로운 사랑        | `cosmos`           |
| 감사   | 핑크 장미     | 감사, 존경           | `pink-rose`        |
| 설렘   | 프리지아      | 순수한 마음          | `freesia`          |
| 평온   | 은방울꽃      | 행복의 재림          | `lily-valley`      |
| 성취감 | 노란 튤립     | 성공, 명성           | `yellow-tulip`     |
| 사랑   | 빨간 장미     | 사랑, 애정           | `red-rose`         |
| 희망   | 데이지        | 희망, 순수           | `daisy`            |
| 활력   | 거베라        | 희망, 도전           | `gerbera`          |
| 재미   | 스위트피      | 즐거운 추억          | `sweet-pea`        |
| 슬픔   | 파란 수국     | 진심, 이해           | `blue-hydrangea`   |
| 외로움 | 물망초        | 나를 잊지 말아요     | `forget-me-not`    |
| 불안   | 라벤더        | 침묵, 의심           | `lavender`         |
| 분노   | 노란 카네이션 | 경멸, 거절           | `yellow-carnation` |
| 피곤   | 민트          | 휴식, 상쾌함         | `mint`             |
| 후회   | 보라색 팬지   | 생각, 추억           | `purple-pansy`     |
| 무기력 | 백합          | 순수, 재생           | `lily`             |
| 혼란   | 아네모네      | 기대, 진실           | `anemone`          |
| 실망   | 노란 수선화   | 불확실한 사랑        | `yellow-daffodil`  |
| 지루함 | 흰 카모마일   | 역경 속의 평온       | `white-chamomile`  |

---

## 데이터 구조

### API 응답 형식 (JSON)

```json
{
  "summary": "일기 내용을 2-3문장으로 요약",
  "emotions": [
    {
      "emotion": "기쁨",
      "percent": 60
    },
    {
      "emotion": "슬픔",
      "percent": 40
    }
  ],
  "coreEmotion": "기쁨",
  "reason": "왜 이 감정을 대표로 선택했는지 설명",
  "flower": "해바라기",
  "floriography": "당신을 보면 행복해요"
}
```

### 필드 설명

| 필드               | 타입    | 필수 | 설명                          |
| ------------------ | ------- | ---- | ----------------------------- |
| summary            | string  | Y    | 일기 내용 요약 (2-3문장)      |
| emotions           | array   | Y    | 감지된 감정들 (최대 3개)      |
| emotions[].emotion | string  | Y    | 감정명 (20개 중 하나)         |
| emotions[].percent | integer | Y    | 감정 비율 (합계 100%)         |
| coreEmotion        | string  | Y    | 대표 감정 (20개 중 하나)      |
| reason             | string  | Y    | 대표 감정 선택 이유 (1-2문장) |
| flower             | string  | Y    | 꽃 이름                       |
| floriography       | string  | Y    | 꽃말                          |

---

## 감정 구분 가이드

### 헷갈리기 쉬운 감정 구분

#### 1. 기쁨 vs 행복

- **기쁨**: 즉각적, 사건 중심, 짧은 기간
  - 예: "선물 받아서 기뻐", "시험 합격해서 기뻐"
- **행복**: 지속적, 관계/상태 중심, 긴 기간
  - 예: "가족과 함께여서 행복해", "요즘 매일 행복해"

#### 2. 설렘 vs 재미

- **설렘**: 미래 지향, 아직 일어나지 않음
  - 예: "내일 데이트야, 설레", "곧 여행 간다"
- **재미**: 현재 진행, 지금 경험 중
  - 예: "지금 하는 게임 재밌어", "새 취미 흥미로워"

#### 3. 슬픔 vs 실망

- **슬픔**: 상실, 큰 감정, 회복 시간 필요
  - 예: "이별해서 슬퍼", "소중한 걸 잃었어"
- **실망**: 기대 불일치, 상대적으로 가벼움
  - 예: "약속 취소돼서 실망", "기대했는데 별로"

#### 4. 무기력 vs 지루함

- **무기력**: 의욕 상실, 에너지 없음
  - 예: "아무것도 하기 싫어", "침대에서 못 일어나"
- **지루함**: 자극 부족, 할 것 없음
  - 예: "집에만 있으니 지루해", "시간이 안 가"

---

## 구현 시 주의사항

### 1. 데이터 일관성

- **감정명은 정확히 일치해야 함**: "기쁨" ⭐ / "기쁜" ❌
- 대소문자 구분 없음 (한글이므로)
- 공백 없음

### 2. 감정 검증

백엔드에서 LLM 응답 검증 시:

```java
Set<String> VALID_EMOTIONS = Set.of(
    "기쁨", "행복", "감사", "설렘", "평온", "성취감",
    "사랑", "희망", "활력", "재미", "슬픔", "외로움",
    "불안", "분노", "피곤", "후회", "무기력", "혼란",
    "실망", "지루함"
);

if (!VALID_EMOTIONS.contains(response.getCoreEmotion())) {
    // 기본값 반환
}
```

프론트엔드에서 이미지 매핑 시:

```javascript
const VALID_EMOTIONS = ["기쁨", "행복", "감사", "설렘", "평온", "성취감", "사랑", "희망", "활력", "재미", "슬픔", "외로움", "불안", "분노", "피곤", "후회", "무기력", "혼란", "실망", "지루함"];

if (!VALID_EMOTIONS.includes(emotion)) {
  // 기본 이미지 표시
}
```

### 3. 기본값 처리

AI 분석 실패 시 기본값:

```json
{
  "coreEmotion": "평온",
  "flower": "은방울꽃",
  "floriography": "행복의 재림"
}
```

### 4. 이미지 파일 규칙

- **3D 스타일**: `{파일명}.png` (투명 배경)
- **실사 스타일**: `{파일명}.jpg`
- 파일명은 영문, 소문자, 하이픈(-) 사용
- 예: `pink-rose.png`, `forget-me-not.jpg`

---

## 테스트 케이스

### 1. 단일 감정

```
입력: "오늘 승진 소식 들었어! 너무 기뻐!"
예상: coreEmotion = "기쁨"
```

### 2. 혼합 감정 (긍정 우세)

```
입력: "시험 떨어져서 속상했지만 친구들이 위로해줘서 고마워"
예상: coreEmotion = "감사" (또는 "슬픔" 가능)
```

### 3. 혼합 감정 (부정 우세)

```
입력: "여행 가서 재밌었는데 돌아오니 현실이 답답해"
예상: coreEmotion = "혼란" (또는 "재미" 가능)
```

### 4. 복잡한 감정

```
입력: "새 프로젝트 시작했는데 불안하면서도 설레"
예상: emotions = [{"emotion": "불안", "percent": 50}, {"emotion": "설렘", "percent": 50}]
```

---

## 버전 히스토리

### v1.0 (2025-12-04)

- 20개 감정 정의 (긍정 10개, 부정 10개)
- 감정별 꽃 매칭
- API 응답 구조 확정

### 향후 계획

- [ ] 사용자 피드백 기반 감정 재분류
- [ ] 계절별 꽃 추가 (v2)
- [ ] 감정 강도 표현 (약함/보통/강함)

---

## FAQ

### Q1. 감정이 20개면 너무 적지 않나요?

A. 20개는 명확한 구분이 가능한 적정 개수입니다. 너무 많으면 AI가 구분하기 어렵고, 이미지 관리도 복잡해집니다.

### Q2. 감정을 추가하려면?

A. 이 문서를 수정하고, 프론트(이미지 추가)/백엔드(프롬프트 수정) 모두 업데이트해야 합니다.

### Q3. 꽃을 변경하고 싶으면?

A. 감정-꽃 매칭표를 수정하고, 백엔드 프롬프트와 프론트 이미지 파일을 교체하면 됩니다.

### Q4. 한 일기에 여러 감정이 있으면?

A. 최대 3개까지 emotions 배열에 포함되며, 가장 비율이 높은 것이 coreEmotion으로 선정됩니다.

---

## 참고 링크

- [프론트엔드 README](../frontend-vue/README.md)
- [백엔드 README](../backend-api/README.md)
- [프롬프트 전문](../docs/prompt-template.md)
